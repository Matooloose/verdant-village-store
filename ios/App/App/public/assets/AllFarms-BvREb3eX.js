import{j as e,E as b,u as D,B as f,C as h,c as E,d as A,e as C,f as F,s as N}from"./index-cM6hlhfj.js";import{r as m}from"./vendor-Gsz-jK4b.js";import{A as j}from"./arrow-left-DjF5G2qn.js";import{M as v}from"./map-pin-DADrLx4s.js";import{S as k}from"./star-DqtE3D7l.js";import{A as V}from"./arrow-right-CK4Oy1Cp.js";import"./ui-CAx9UBAP.js";const U=()=>{const[g,t]=m.useState([]),[p,n]=m.useState(!0),o=D();return m.useEffect(()=>{(async()=>{n(!0);try{const{data:r,error:i}=await N.from("farms").select("*").order("name",{ascending:!0});if(i){console.error("Error fetching farms:",i),t([]),n(!1);return}if(!r||r.length===0){t([]),n(!1);return}const d=[...new Set(r.map(l=>l.farmer_id).filter(Boolean))],{data:a,error:u}=await N.from("profiles").select("id, name, address, image_url").in("id",d);u&&console.error("Error fetching farmer profiles:",u);const c=new Map;a==null||a.forEach(l=>{c.set(l.id,l)});const x=r.map(l=>({...l,image_url:l.image_url??null,location:l.location??null,latitude:l.latitude??null,longitude:l.longitude??null,farm_size:l.farm_size??null,rating:null,review_count:null,farmerProfile:c.get(l.farmer_id)||null}));t(x)}catch(r){console.error("Error in fetchFarms:",r),t([])}finally{n(!1)}})()},[]),e.jsxDEV("div",{className:"min-h-screen bg-background flex flex-col",children:[e.jsxDEV("header",{className:"page-topbar sticky top-0 z-50 bg-card border-b shadow-sm",children:e.jsxDEV("div",{className:"flex items-center gap-4 p-4",children:[e.jsxDEV(f,{variant:"ghost",size:"icon",onClick:()=>o(-1),children:e.jsxDEV(j,{className:"h-5 w-5"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/AllFarms.tsx",lineNumber:113,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/AllFarms.tsx",lineNumber:112,columnNumber:11},void 0),e.jsxDEV("h1",{className:"text-xl font-bold",children:"Browse All Farms"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/AllFarms.tsx",lineNumber:115,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/AllFarms.tsx",lineNumber:111,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/AllFarms.tsx",lineNumber:110,columnNumber:3},void 0),e.jsxDEV("div",{className:"flex-1 px-4 py-6 pb-24",children:p?e.jsxDEV("div",{className:"flex justify-center py-12",children:e.jsxDEV("div",{className:"animate-spin h-8 w-8 rounded-full border-4 border-primary border-t-transparent"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/AllFarms.tsx",lineNumber:123,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/AllFarms.tsx",lineNumber:122,columnNumber:11},void 0):e.jsxDEV("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 max-w-6xl mx-auto",children:g.map(s=>{var r,i,d,a;return e.jsxDEV(h,{className:"hover:shadow-lg transition-shadow",children:[e.jsxDEV(E,{children:e.jsxDEV(A,{className:"flex items-center gap-2",children:[s.image_url||(r=s.farmerProfile)!=null&&r.image_url?e.jsxDEV("img",{src:s.image_url||((i=s.farmerProfile)==null?void 0:i.image_url)||"",alt:s.name,className:"w-12 h-12 rounded-full object-cover mr-2"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/AllFarms.tsx",lineNumber:132,columnNumber:23},void 0):e.jsxDEV("div",{className:"w-12 h-12 rounded-full bg-muted flex items-center justify-center mr-2",children:e.jsxDEV(v,{className:"h-6 w-6 text-muted-foreground"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/AllFarms.tsx",lineNumber:139,columnNumber:25},void 0)},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/AllFarms.tsx",lineNumber:138,columnNumber:23},void 0),e.jsxDEV("span",{children:s.name},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/AllFarms.tsx",lineNumber:142,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/AllFarms.tsx",lineNumber:130,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/AllFarms.tsx",lineNumber:129,columnNumber:17},void 0),e.jsxDEV(C,{children:[e.jsxDEV("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxDEV(v,{className:"h-4 w-4 text-muted-foreground"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/AllFarms.tsx",lineNumber:147,columnNumber:21},void 0),e.jsxDEV("span",{className:"text-sm text-muted-foreground truncate",title:((d=s.farmerProfile)==null?void 0:d.address)||s.location||"Address not available",children:((a=s.farmerProfile)==null?void 0:a.address)||s.location||"Address not available"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/AllFarms.tsx",lineNumber:148,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/AllFarms.tsx",lineNumber:146,columnNumber:19},void 0),e.jsxDEV("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxDEV(k,{className:"h-4 w-4 text-yellow-500"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/AllFarms.tsx",lineNumber:156,columnNumber:21},void 0),e.jsxDEV("span",{className:"text-sm font-medium",children:s.rating??0},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/AllFarms.tsx",lineNumber:157,columnNumber:21},void 0),e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:["(",s.review_count??0," reviews)"]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/AllFarms.tsx",lineNumber:158,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/AllFarms.tsx",lineNumber:155,columnNumber:19},void 0),s.farm_size&&e.jsxDEV("div",{className:"text-xs text-muted-foreground mb-2",children:s.farm_size},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/AllFarms.tsx",lineNumber:161,columnNumber:21},void 0),e.jsxDEV(f,{variant:"outline",className:"w-full flex items-center justify-between",onClick:()=>o(`/farms/${s.id}`),children:["View Farm",e.jsxDEV(V,{className:"h-4 w-4 ml-2"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/AllFarms.tsx",lineNumber:169,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/AllFarms.tsx",lineNumber:163,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/AllFarms.tsx",lineNumber:145,columnNumber:17},void 0)]},s.id,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/AllFarms.tsx",lineNumber:128,columnNumber:15},void 0)})},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/AllFarms.tsx",lineNumber:126,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/AllFarms.tsx",lineNumber:120,columnNumber:7},void 0),e.jsxDEV(F,{},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/AllFarms.tsx",lineNumber:179,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/AllFarms.tsx",lineNumber:108,columnNumber:5},void 0)},M=()=>e.jsxDEV(b,{children:e.jsxDEV(U,{},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/AllFarms.tsx",lineNumber:188,columnNumber:5},void 0)},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/AllFarms.tsx",lineNumber:187,columnNumber:3},void 0);export{M as default};
