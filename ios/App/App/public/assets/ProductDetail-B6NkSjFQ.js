import{I as J,u as K,h as X,x as Y,y as Z,a as ee,s as v,j as e,z as se,B as a,w as q,F as te,p as le,C as g,e as p,c as re,d as ae,M as ie,D as oe,l as de,m as ne,n as me}from"./index-cM6hlhfj.js";import{r as o}from"./vendor-Gsz-jK4b.js";import{T as ce,a as ue,b as R,c as D}from"./tabs-BISYs8ua.js";import{T as Ne}from"./textarea-D68RpVGj.js";import{A as ve}from"./arrow-left-DjF5G2qn.js";import{S as ge}from"./share-2-Ct2M4uTe.js";import{M as pe}from"./map-pin-DADrLx4s.js";import{S as x}from"./star-DqtE3D7l.js";import{M as De}from"./minus-BLsn1t9H.js";import{P as xe}from"./plus-ClHW2wdp.js";import{H as fe}from"./heart-DuimZQCb.js";import{S as T}from"./shield-CB9ZHXI_.js";import"./ui-CAx9UBAP.js";function qe(){var S;const{productId:m}=J(),f=K(),{toast:d}=X(),{addToCart:A}=Y(),{addToWishlist:B,removeFromWishlist:L,isInWishlist:b}=Z(),{user:h}=ee(),[s,$]=o.useState(null),[n,F]=o.useState([]),[M,C]=o.useState(!0),[k,z]=o.useState(0),[c,j]=o.useState(1),[W,u]=o.useState(!1),[N,P]=o.useState(0),[E,U]=o.useState(""),[V,y]=o.useState(!1);o.useEffect(()=>{m&&(I(),w())},[m]);const I=async()=>{if(m)try{C(!0);const{data:t,error:r}=await v.from("products").select("*").eq("id",m).single();if(r)throw r;const{data:i}=await v.from("farms").select("name, location, description").eq("farmer_id",t.farmer_id).single(),l=t,G={id:String(l.id??""),name:String(l.name??""),description:typeof l.description=="string"?l.description:null,price:typeof l.price=="number"?l.price:Number(l.price??0),unit:String(l.unit??"each"),category:String(l.category??"General"),images:Array.isArray(l.images)?l.images:l.images?[String(l.images)]:[],is_organic:!!l.is_organic,is_featured:!!l.is_featured,farmer_id:String(l.farmer_id??""),quantity:typeof l.quantity=="number"?l.quantity:Number(l.quantity??0),nutritional_info:l.nutritional_info??null,storage_instructions:typeof l.storage_instructions=="string"?l.storage_instructions:null,harvest_date:typeof l.harvest_date=="string"?l.harvest_date:null,expiry_date:typeof l.expiry_date=="string"?l.expiry_date:null,minimum_order_quantity:typeof l.minimum_order_quantity=="number"?l.minimum_order_quantity:Number(l.minimum_order_quantity??1),created_at:String(l.created_at??new Date().toISOString()),farmName:(i==null?void 0:i.name)||"Unknown Farm",farmLocation:(i==null?void 0:i.location)||void 0,farmDescription:(i==null?void 0:i.description)||void 0};$(G)}catch(t){console.error(t),d({title:"Error",description:"Could not load product",variant:"destructive"})}finally{C(!1)}},w=async()=>{if(m)try{const{data:t,error:r}=await v.from("reviews").select("*, profiles ( name )").eq("product_id",m);if(r)throw r;F(t||[])}catch(t){console.error(t)}},O=async()=>{var t;if(s){y(!0);try{await A({id:s.id,name:s.name,price:s.price,unit:s.unit,image:((t=s.images)==null?void 0:t[0])||"/placeholder.svg",farmName:s.farmName||"Unknown Farm",category:s.category}),d({title:"Added to cart",description:`${c} √ó ${s.name} added`})}catch(r){console.error(r),d({title:"Error",description:"Failed to add to cart",variant:"destructive"})}finally{y(!1)}}},H=()=>{var t;s&&(b(s.id)?(L(s.id),d({title:"Removed",description:`${s.name} removed from wishlist`})):(B({id:s.id,name:s.name,price:s.price,unit:s.unit,image:((t=s.images)==null?void 0:t[0])||"/placeholder.svg",farmName:s.farmName||"Unknown Farm",category:s.category}),d({title:"Added",description:`${s.name} added to wishlist`})))},Q=async()=>{if(!(!s||!h||N===0))try{const{error:t}=await v.from("reviews").insert({product_id:s.id,rating:N,comment:E,user_id:h.id});if(t)throw t;d({title:"Thanks",description:"Review submitted"}),u(!1),P(0),U(""),w()}catch(t){console.error(t),d({title:"Error",description:"Could not submit review",variant:"destructive"})}},_=n.length?n.reduce((t,r)=>t+r.rating,0)/n.length:0;return M?e.jsxDEV("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full mx-auto"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:197,columnNumber:111},this),e.jsxDEV("p",{className:"mt-4 text-muted-foreground",children:"Loading..."},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:197,columnNumber:217},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:197,columnNumber:82},this)},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:197,columnNumber:5},this):s?e.jsxDEV("div",{className:"min-h-screen bg-background p-2 sm:p-4",children:e.jsxDEV("div",{className:"container mx-auto max-w-6xl px-4",children:[e.jsxDEV("header",{className:"page-topbar sticky top-0 z-50 bg-card border-b shadow-sm",children:e.jsxDEV("div",{className:"container mx-auto max-w-6xl px-4 py-3 flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(a,{variant:"ghost",size:"icon",onClick:()=>f(-1),"aria-label":"Back",children:e.jsxDEV(ve,{className:"h-5 w-5"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:210,columnNumber:98},this)},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:210,columnNumber:15},this),e.jsxDEV("h2",{className:"text-lg font-semibold truncate",children:s.name},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:211,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:209,columnNumber:13},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:e.jsxDEV(a,{variant:"ghost",size:"icon",onClick:()=>{try{navigator.share?navigator.share({title:s.name,url:window.location.href}):navigator.clipboard&&(navigator.clipboard.writeText(window.location.href),d({title:"Link copied"}))}catch(t){console.error("Share failed",t),d({title:"Share failed",variant:"destructive"})}},"aria-label":"Share",children:e.jsxDEV(ge,{className:"h-5 w-5"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:232,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:214,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:213,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:208,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:207,columnNumber:9},this),e.jsxDEV("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"aspect-square rounded-lg overflow-hidden bg-card",children:e.jsxDEV("img",{src:((S=s.images)==null?void 0:S[k])||"/placeholder.svg",alt:s.name,className:"w-full h-full object-cover"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:241,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:240,columnNumber:13},this),s.images&&s.images.length>1&&e.jsxDEV("div",{className:"grid grid-cols-4 gap-2",children:s.images.map((t,r)=>e.jsxDEV("button",{onClick:()=>z(r),className:`aspect-square rounded-lg overflow-hidden border-2 ${k===r?"border-green-500":"border-gray-200"}`,children:e.jsxDEV("img",{src:t,alt:`${s.name} ${r+1}`,className:"w-full h-full object-cover"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:247,columnNumber:21},this)},r,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:246,columnNumber:19},this))},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:244,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:239,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-6 lg:relative",children:[e.jsxDEV("div",{className:"grid grid-cols-1 lg:grid-cols-[1fr_320px] gap-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"flex items-center gap-2 mb-2",children:[s.is_organic&&e.jsxDEV(q,{variant:"secondary",className:"text-xs",children:"üå± Organic"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:258,columnNumber:42},this),s.is_featured&&e.jsxDEV(q,{variant:"default",className:"text-xs",children:"‚≠ê Featured"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:259,columnNumber:43},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:257,columnNumber:17},this),e.jsxDEV("div",{className:"flex items-center gap-2 mt-2",children:[e.jsxDEV(pe,{className:"h-4 w-4 text-muted-foreground"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:263,columnNumber:19},this),e.jsxDEV("div",{className:"text-sm text-muted-foreground font-medium",children:[e.jsxDEV("div",{children:s.farmName},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:265,columnNumber:21},this),s.farmLocation&&e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:s.farmLocation},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:266,columnNumber:46},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:264,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:262,columnNumber:17},this),n.length>0&&e.jsxDEV("div",{className:"flex items-center gap-2 mt-3",children:[e.jsxDEV("div",{className:"flex",children:[...Array(5)].map((t,r)=>e.jsxDEV(x,{className:`h-5 w-5 ${r<_?"fill-yellow-400 text-yellow-400":"text-muted-foreground"}`},r,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:272,columnNumber:72},this))},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:272,columnNumber:21},this),e.jsxDEV("span",{className:"text-lg font-medium text-card-foreground",children:_.toFixed(1)},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:273,columnNumber:21},this),e.jsxDEV("span",{className:"text-muted-foreground",children:["(",n.length," reviews)"]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:274,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:271,columnNumber:19},this),e.jsxDEV("div",{className:"mt-4 space-y-4",children:[e.jsxDEV("h3",{className:"text-base font-semibold",children:"About this product"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:279,columnNumber:19},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:s.description||"No description available."},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:280,columnNumber:19},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-3 mt-4",children:[e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:"Category"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:282,columnNumber:48},this),e.jsxDEV("p",{className:"font-medium",children:s.category},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:282,columnNumber:105},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:282,columnNumber:21},this),e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:"Stock"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:283,columnNumber:48},this),e.jsxDEV("p",{className:"font-medium",children:[s.quantity," items available"]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:283,columnNumber:102},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:283,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:281,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:278,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:256,columnNumber:15},this),e.jsxDEV("aside",{className:"lg:sticky lg:top-20 bg-card p-4 rounded-lg shadow-sm",children:e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:"flex items-baseline justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-2xl font-bold text-primary",children:["R",s.price.toFixed(2)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:292,columnNumber:23},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:["per ",s.unit]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:293,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:291,columnNumber:21},this),e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:s.minimum_order_quantity>1?`Min ${s.minimum_order_quantity}`:""},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:295,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:290,columnNumber:19},this),e.jsxDEV("div",{className:"lg:hidden bg-card rounded-lg p-4 space-y-4",children:[e.jsxDEV("div",{className:"flex items-center gap-4",children:[e.jsxDEV("label",{className:"font-medium",children:"Quantity:"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:300,columnNumber:17},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(a,{variant:"outline",size:"sm",onClick:()=>j(Math.max(s.minimum_order_quantity,c-1)),disabled:c<=s.minimum_order_quantity,children:e.jsxDEV(De,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:302,columnNumber:193},this)},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:302,columnNumber:19},this),e.jsxDEV("span",{className:"w-12 text-center font-medium",children:c},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:303,columnNumber:19},this),e.jsxDEV(a,{variant:"outline",size:"sm",onClick:()=>j(Math.min(s.quantity,c+1)),disabled:c>=s.quantity,children:e.jsxDEV(xe,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:304,columnNumber:165},this)},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:304,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:301,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:299,columnNumber:15},this),e.jsxDEV("div",{className:"flex gap-3",children:[e.jsxDEV(a,{onClick:O,disabled:V||s.quantity===0,className:"flex-1",children:V?e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:308,columnNumber:139},this),"Adding..."]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:308,columnNumber:137},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(te,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:308,columnNumber:258},this),"Add to Cart"]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:308,columnNumber:256},this)},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:308,columnNumber:17},this),e.jsxDEV(a,{variant:"outline",onClick:H,children:e.jsxDEV(fe,{className:`h-4 w-4 ${b(s.id)?"fill-red-500 text-red-500":""}`},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:309,columnNumber:74},this)},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:309,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:307,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:298,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:289,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:288,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:255,columnNumber:13},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[s.harvest_date&&e.jsxDEV("div",{className:"bg-card rounded-lg p-3",children:e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(le,{className:"h-4 w-4 text-green-600"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:323,columnNumber:122},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm font-medium",children:"Harvested"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:323,columnNumber:171},this),e.jsxDEV("p",{className:"text-xs text-gray-600",children:new Date(s.harvest_date).toLocaleDateString()},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:323,columnNumber:219},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:323,columnNumber:166},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:323,columnNumber:81},this)},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:323,columnNumber:41},this),s.expiry_date&&e.jsxDEV("div",{className:"bg-card rounded-lg p-3",children:e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(T,{className:"h-4 w-4 text-yellow-600"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:324,columnNumber:121},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm font-medium",children:"Best Before"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:324,columnNumber:172},this),e.jsxDEV("p",{className:"text-xs text-gray-600",children:new Date(s.expiry_date).toLocaleDateString()},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:324,columnNumber:222},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:324,columnNumber:167},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:324,columnNumber:80},this)},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:324,columnNumber:40},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:322,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:254,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:238,columnNumber:9},this),e.jsxDEV("div",{className:"mt-8",children:e.jsxDEV(ce,{defaultValue:"description",className:"w-full",children:[e.jsxDEV(ue,{className:"grid w-full grid-cols-2 sm:grid-cols-4 gap-2",children:[e.jsxDEV(R,{value:"description",children:"Description"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:332,columnNumber:15},this),e.jsxDEV(R,{value:"reviews",children:["Reviews (",n.length,")"]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:333,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:331,columnNumber:13},this),e.jsxDEV(D,{value:"description",className:"mt-6",children:e.jsxDEV(g,{children:e.jsxDEV(p,{className:"pt-6",children:[e.jsxDEV("p",{className:"text-muted-foreground leading-relaxed",children:s.description||"No description available for this product."},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:338,columnNumber:51},this),s.farmDescription&&e.jsxDEV("div",{className:"mt-4 pt-4 border-t",children:[e.jsxDEV("h4",{className:"font-semibold mb-2 text-card-foreground",children:["About ",s.farmName]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:338,columnNumber:242},this),e.jsxDEV("p",{className:"text-muted-foreground",children:s.farmDescription},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:338,columnNumber:327},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:338,columnNumber:206},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:338,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:338,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:337,columnNumber:13},this),e.jsxDEV(D,{value:"nutrition",className:"mt-6",children:e.jsxDEV(g,{children:e.jsxDEV(p,{className:"pt-6",children:s.nutritional_info?e.jsxDEV("pre",{className:"text-sm text-muted-foreground",children:JSON.stringify(s.nutritional_info,null,2)},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:342,columnNumber:80},this):e.jsxDEV("p",{className:"text-muted-foreground",children:"Nutritional information not available for this product."},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:342,columnNumber:189},this)},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:342,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:342,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:341,columnNumber:13},this),e.jsxDEV(D,{value:"storage",className:"mt-6",children:e.jsxDEV(g,{children:e.jsxDEV(p,{className:"pt-6",children:e.jsxDEV("div",{className:"space-y-4",children:[s.storage_instructions?e.jsxDEV("p",{className:"text-muted-foreground",children:s.storage_instructions},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:346,columnNumber:111},this):e.jsxDEV("p",{className:"text-muted-foreground",children:"Storage instructions not available."},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:346,columnNumber:187},this),s.expiry_date&&e.jsxDEV("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(T,{className:"h-4 w-4 text-yellow-600"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:346,columnNumber:401},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm font-medium text-yellow-800",children:"Best Before"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:346,columnNumber:452},this),e.jsxDEV("p",{className:"text-xs text-yellow-600",children:new Date(s.expiry_date).toLocaleDateString()},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:346,columnNumber:518},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:346,columnNumber:447},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:346,columnNumber:360},this)},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:346,columnNumber:290},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:346,columnNumber:51},this)},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:346,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:346,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:345,columnNumber:13},this),e.jsxDEV(D,{value:"reviews",className:"mt-6",children:e.jsxDEV(g,{children:[e.jsxDEV(re,{className:"flex flex-row items-center justify-between",children:[e.jsxDEV(ae,{children:"Customer Reviews"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:351,columnNumber:84},this),e.jsxDEV(a,{onClick:()=>u(!0),variant:"outline",size:"sm",children:[e.jsxDEV(ie,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:351,columnNumber:200},this),"Write Review"]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:351,columnNumber:123},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:351,columnNumber:17},this),e.jsxDEV(p,{children:n.length===0?e.jsxDEV("p",{className:"text-muted-foreground text-center py-8",children:"No reviews yet. Be the first to review this product!"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:353,columnNumber:44},this):e.jsxDEV("div",{className:"space-y-4",children:n.map(t=>{var r;return e.jsxDEV("div",{className:"border-b pb-4 last:border-b-0",children:[e.jsxDEV("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-2 gap-2",children:[e.jsxDEV("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsxDEV("div",{className:"flex flex-shrink-0",children:[...Array(5)].map((i,l)=>e.jsxDEV(x,{className:`h-4 w-4 ${l<t.rating?"fill-yellow-400 text-yellow-400":"text-muted-foreground"}`},l,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:354,columnNumber:338},this))},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:354,columnNumber:272},this),e.jsxDEV("span",{className:"font-medium text-card-foreground truncate max-w-xs",children:((r=t.profiles)==null?void 0:r.name)||"Anonymous"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:354,columnNumber:468},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:354,columnNumber:223},this),e.jsxDEV("span",{className:"text-sm text-muted-foreground whitespace-nowrap",children:new Date(t.created_at).toLocaleDateString()},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:354,columnNumber:588},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:354,columnNumber:137},this),t.comment&&e.jsxDEV("p",{className:"text-muted-foreground break-words",children:t.comment},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:354,columnNumber:736},this)]},t.id,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:354,columnNumber:74},this)})},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:354,columnNumber:21},this)},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:352,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:350,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:349,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:330,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:329,columnNumber:9},this),e.jsxDEV(oe,{open:W,onOpenChange:u,children:e.jsxDEV(de,{children:[e.jsxDEV(ne,{children:e.jsxDEV(me,{children:"Write a Review"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:365,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:364,columnNumber:13},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm font-medium",children:"Rating"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:370,columnNumber:17},this),e.jsxDEV("div",{className:"flex gap-1 mt-1",children:[1,2,3,4,5].map(t=>e.jsxDEV(a,{variant:"ghost",size:"sm",onClick:()=>P(t),children:e.jsxDEV(x,{className:`h-5 w-5 ${t<=N?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:371,columnNumber:159},this)},t,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:371,columnNumber:76},this))},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:371,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:369,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm font-medium",children:"Comment (optional)"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:375,columnNumber:17},this),e.jsxDEV(Ne,{value:E,onChange:t=>U(t.target.value),placeholder:"Share your thoughts about this product...",className:"mt-1"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:376,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:374,columnNumber:15},this),e.jsxDEV("div",{className:"flex justify-end gap-2",children:[e.jsxDEV(a,{variant:"outline",onClick:()=>u(!1),children:"Cancel"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:380,columnNumber:17},this),e.jsxDEV(a,{onClick:Q,disabled:N===0,children:"Submit Review"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:381,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:379,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:368,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:363,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:362,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:206,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:205,columnNumber:5},this):e.jsxDEV("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV(se,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:201,columnNumber:111},this),e.jsxDEV("h2",{className:"text-2xl font-bold text-card-foreground mb-2",children:"Product not found"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:201,columnNumber:179},this),e.jsxDEV(a,{onClick:()=>f("/browse-products"),children:"Browse"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:201,columnNumber:262},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:201,columnNumber:82},this)},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/ProductDetail.tsx",lineNumber:201,columnNumber:5},this)}export{qe as default};
