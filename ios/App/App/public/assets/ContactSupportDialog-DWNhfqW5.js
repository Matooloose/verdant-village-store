import{h as C,j as e,B as h,H as j,D as E,l as V,m as U,n as F}from"./index-cM6hlhfj.js";import{r as s}from"./vendor-Gsz-jK4b.js";import{I as u}from"./input-lvqziEey.js";import{L as i}from"./label-D9QexlfX.js";import{T as y}from"./textarea-D68RpVGj.js";function w({defaultName:n="",defaultEmail:a="",onSuccess:o}){const{toast:r}=C(),[p,g]=s.useState(n),[d,S]=s.useState(a),[m,v]=s.useState(""),[c,N]=s.useState(""),[f,D]=s.useState(!1),b=s.useRef(null),k=async t=>{if(t==null||t.preventDefault(),!m.trim()||!c.trim()){r({title:"Validation",description:"Please provide a subject and message",variant:"destructive"});return}D(!0);try{const{data:l,error:x}=await j.from("support_tickets").insert({title:m,description:c,user_email:d,user_name:p}).select().single();if(x)throw x;r({title:"Ticket Created",description:"We will get back to you shortly."}),v(""),N(""),o==null||o(l==null?void 0:l.id)}catch(l){console.error("Failed to create support ticket",l),r({title:"Error",description:"Failed to create support ticket",variant:"destructive"})}finally{D(!1)}};return e.jsxDEV("form",{onSubmit:k,className:"space-y-4",children:[e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV(i,{children:"Name"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/components/ContactSupportForm.tsx",lineNumber:56,columnNumber:11},this),e.jsxDEV(u,{value:p,onChange:t=>g(t.target.value),placeholder:"Your name"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/components/ContactSupportForm.tsx",lineNumber:57,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/components/ContactSupportForm.tsx",lineNumber:55,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV(i,{children:"Email"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/components/ContactSupportForm.tsx",lineNumber:60,columnNumber:11},this),e.jsxDEV(u,{value:d,onChange:t=>S(t.target.value),placeholder:"you@example.com"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/components/ContactSupportForm.tsx",lineNumber:61,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/components/ContactSupportForm.tsx",lineNumber:59,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/components/ContactSupportForm.tsx",lineNumber:54,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV(i,{children:"Subject"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/components/ContactSupportForm.tsx",lineNumber:66,columnNumber:9},this),e.jsxDEV(u,{value:m,onChange:t=>v(t.target.value),placeholder:"Short summary"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/components/ContactSupportForm.tsx",lineNumber:67,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/components/ContactSupportForm.tsx",lineNumber:65,columnNumber:7},this),e.jsxDEV("div",{children:[e.jsxDEV(i,{children:"Message"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/components/ContactSupportForm.tsx",lineNumber:71,columnNumber:9},this),e.jsxDEV(y,{value:c,onChange:t=>N(t.target.value),rows:6,placeholder:"Describe your issue"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/components/ContactSupportForm.tsx",lineNumber:72,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/components/ContactSupportForm.tsx",lineNumber:70,columnNumber:7},this),e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("input",{ref:b,type:"file",className:"hidden","aria-label":"Attach files"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/components/ContactSupportForm.tsx",lineNumber:76,columnNumber:3},this),e.jsxDEV(h,{variant:"outline",onClick:()=>{var t;return(t=b.current)==null?void 0:t.click()},children:"Attach files"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/components/ContactSupportForm.tsx",lineNumber:77,columnNumber:9},this),e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:"Supported: images, pdf, logs"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/components/ContactSupportForm.tsx",lineNumber:78,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/components/ContactSupportForm.tsx",lineNumber:75,columnNumber:7},this),e.jsxDEV("div",{className:"flex justify-end",children:e.jsxDEV(h,{type:"submit",disabled:f,children:f?"Sending...":"Send"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/components/ContactSupportForm.tsx",lineNumber:82,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/components/ContactSupportForm.tsx",lineNumber:81,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/components/ContactSupportForm.tsx",lineNumber:53,columnNumber:5},this)}function B({open:n,onOpenChange:a}){const{toast:o}=C();return e.jsxDEV(E,{open:n,onOpenChange:a,children:e.jsxDEV(V,{className:"w-full max-w-3xl p-0",children:e.jsxDEV("div",{className:"max-h-[80vh] overflow-y-auto p-6",children:[e.jsxDEV(U,{children:e.jsxDEV(F,{children:"Contact Support"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/components/ContactSupportDialog.tsx",lineNumber:19,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/components/ContactSupportDialog.tsx",lineNumber:18,columnNumber:11},this),e.jsxDEV("div",{className:"mt-4",children:e.jsxDEV(w,{onSuccess:r=>{a(!1),o({title:"Ticket submitted",description:`Ticket ${r} created`})}},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/components/ContactSupportDialog.tsx",lineNumber:23,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/components/ContactSupportDialog.tsx",lineNumber:22,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/components/ContactSupportDialog.tsx",lineNumber:17,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/components/ContactSupportDialog.tsx",lineNumber:16,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/components/ContactSupportDialog.tsx",lineNumber:15,columnNumber:5},this)}export{B as C};
