import{J as c,u as m,h as v,s as g,j as e,C as b,c as f,d as N,q as p,e as x,i as h,B as C}from"./index-cM6hlhfj.js";import{r as o}from"./vendor-Gsz-jK4b.js";import{C as k}from"./circle-alert-C1-S23ot.js";import"./ui-CAx9UBAP.js";const U=()=>{const[l]=c(),s=m(),{toast:n}=v(),[a,r]=o.useState("processing");return o.useEffect(()=>{const i=l.get("access_token"),d=l.get("refresh_token"),t=l.get("type");i&&d&&(t==="signup"||t==="invite"||t==="recovery")?g.auth.setSession({access_token:i,refresh_token:d}).then(()=>{r("success"),setTimeout(()=>s("/dashboard"),1200)}).catch(u=>{console.error("Auth callback setSession error:",u),r("error"),n({title:"Authentication failed",description:"Unable to complete sign-in. Please sign in manually.",variant:"destructive"}),setTimeout(()=>s("/login"),2e3)}):(r("error"),n({title:"Invalid callback",description:"Missing authentication tokens in the URL.",variant:"destructive"}),setTimeout(()=>s("/login"),1500))},[]),e.jsxDEV("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:e.jsxDEV("div",{className:"w-full max-w-md",children:e.jsxDEV(b,{children:[e.jsxDEV(f,{className:"text-center",children:[e.jsxDEV(N,{className:"text-xl",children:"Completing sign-in"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/AuthCallback.tsx",lineNumber:49,columnNumber:13},void 0),e.jsxDEV(p,{children:"Finishing your sign-in and redirecting to your dashboard."},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/AuthCallback.tsx",lineNumber:50,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/AuthCallback.tsx",lineNumber:48,columnNumber:11},void 0),e.jsxDEV(x,{className:"text-center space-y-4",children:[a==="processing"&&e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/AuthCallback.tsx",lineNumber:55,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Processing authentication..."},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/AuthCallback.tsx",lineNumber:56,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/AuthCallback.tsx",lineNumber:54,columnNumber:15},void 0),a==="success"&&e.jsxDEV("div",{className:"inline-flex items-center gap-2 text-green-600 bg-green-50 px-4 py-2 rounded-lg mx-auto",children:[e.jsxDEV(h,{className:"h-5 w-5"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/AuthCallback.tsx",lineNumber:62,columnNumber:17},void 0),e.jsxDEV("span",{className:"font-medium",children:"Signed in successfully"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/AuthCallback.tsx",lineNumber:63,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/AuthCallback.tsx",lineNumber:61,columnNumber:15},void 0),a==="error"&&e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"inline-flex items-center gap-2 text-red-600 bg-red-50 px-4 py-2 rounded-lg mx-auto",children:[e.jsxDEV(k,{className:"h-5 w-5"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/AuthCallback.tsx",lineNumber:70,columnNumber:19},void 0),e.jsxDEV("span",{className:"font-medium",children:"Sign-in failed"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/AuthCallback.tsx",lineNumber:71,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/AuthCallback.tsx",lineNumber:69,columnNumber:17},void 0),e.jsxDEV("div",{className:"mt-4",children:e.jsxDEV(C,{onClick:()=>s("/login"),children:"Go to Login"},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/AuthCallback.tsx",lineNumber:74,columnNumber:19},void 0)},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/AuthCallback.tsx",lineNumber:73,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/AuthCallback.tsx",lineNumber:68,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/AuthCallback.tsx",lineNumber:52,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/AuthCallback.tsx",lineNumber:47,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/AuthCallback.tsx",lineNumber:46,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/dell/Desktop/verdant-village-store/src/pages/AuthCallback.tsx",lineNumber:45,columnNumber:5},void 0)};export{U as default};
